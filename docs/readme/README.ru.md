# Recycler

**Языки:** [English](../README.md) · [Українська](README.uk.md) · [Русский](README.ru.md) · [Беларуская](README.be.md) · [Polski](README.pl.md) · [Eesti](README.et.md) · [Deutsch](README.de.md)

Переработчик (Recycler) — лёгкий плагин Paper 1.21.9, позволяющий игрокам перерабатывать ресурсы в случайные награды с отдельными кулдаунами для каждого материала.

## Возможности

- `/recycle` открывает однорядный GUI **Item Recycler** с единственным доступным слотом 1.
- Любой стак можно обменять на случайную блоковую награду; количество не превышает максимальный размер стака выбранного блока.
- Если положить **полный стак** (точный максимум и минимум 16 предметов), ролл превращается в случайный предмет вместо блока.
- Предметные награды имеют 70% шанс получить зачарования из взвешенной таблицы (обычно 1–5 чар с акцентом на 2–3) и 5% шанс удвоиться, если предмет стакуется.
- Высокие тировые материалы (незерит, алмазы, золото, железо, камень, кольчужка) используют множители, делающие мощные предметы редкими и сложными для ролла с ≥3 чарами (незерит ≈ в 10 раз реже нейтральних дропов).
- Каждый материал (и вход, и награда) имеет собственный 5-минутный кулдаун, поэтому нельзя сразу повторить комбинацию.
- GUI остаётся открытым после каждого ролла, чтобы можно было безостановочно подкидывать предметы.
- Предметы, оставленные внутри, автоматически возвращаются игроку при закрытии, чтобы ничего не пропало.

## Локализация

- Встроенные локали: `en_us`, `uk_ua`, `ru_ru`, `be_by`, `pl_pl`, `et_ee`, `de_de`.
- Сообщения хранятся в `src/main/resources/lang/*.yml`; чтобы добавить новую, продублируй ключи и переведи значения.
- Игрок видит сообщения на языке клиента, если такая локаль существует.

## Compatibility

- Протестировано с Paper API `1.21.9` (см. `<paper.version>` в `pom.xml`). Другие сборки 1.21.x и форки на базе Paper (например Purpur 1.21.9) скорее всего будут работать, но используйте их на свой страх и риск.
- Требуется Java 21 для сборки и запуска.

## Сборка

Выполни Maven в корне репозитория:

```powershell
mvn package
```

Готовый jar появится в `target/recycler-1.0.0.jar`.

## Тестирование

- Для запуска автотестов (JUnit 5 + Maven Surefire) используй:

```powershell
mvn test
```

- Тесты лежат в `src/test/java`. Выносите бизнес-логику в обычные Java-сервисы, чтобы не тянуть Bukkit в unit-тесты.
- После любых изменений перезапускайте `mvn test`, чтобы убедиться, что проект остаётся зелёным перед сборкой.

## Использование

1. Скопируй собранный JAR в папку `plugins/` сервера.
2. Запусти Paper 1.21.9 на Java 17 (или совместимой версии по требованиям сервера).
3. Пропиши `/recycle`, положи нужный стак в слот 1 и забери награду.
4. Если кулдаун ещё идёт, появится сообщение; предметы, забытые в GUI, возвращаются в инвентарь при закрытии.
